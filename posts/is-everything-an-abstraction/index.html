<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-01-26">

<title>Is Everything an Abstraction? Exploring the Dance Between Realism and Instrumentalism – Curiosity Trace</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-5027bf1c1f92ac6615724d89c8213d6a.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-498T1C2SN2"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-498T1C2SN2', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Curiosity Trace</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/bdsaglam"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/bdsaglam"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Is Everything an Abstraction? Exploring the Dance Between Realism and Instrumentalism</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Philosophy</div>
                <div class="quarto-category">Science</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">January 26, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>Imagine peering into the heart of reality, striving to grasp the universe’s most fundamental secrets. As physicists delve deeper, unveiling particles smaller than atoms and forces more elusive than gravity, a provocative thought emerges: <strong>“Everything is an abstraction.”</strong> This idea isn’t just poetic—it challenges the very way we understand and describe the cosmos. Are electrons, quarks, and fields real entities, or are they sophisticated tools our minds create to navigate an unknowable reality?</p>
<section id="the-abstraction-conundrum" class="level2">
<h2 class="anchored" data-anchor-id="the-abstraction-conundrum">The Abstraction Conundrum</h2>
<p>Our journey into the microscopic world reveals an ever-deepening hierarchy of particles. From <strong>Democritus’s</strong> early atomism to modern quantum field theory, science has consistently uncovered smaller and more intricate components of matter. Yet, no matter how far we probe, our experience remains tied to <strong>abstractions</strong>. An atom, once thought indivisible, reveals itself as a complex dance of electrons and a nucleus of protons and neutrons. Zoom in further, and electrons themselves appear as manifestations of quantum fields, with no definitive “thingness.” At the Planck scale, our current theories blur, suggesting that perhaps the very fabric of the universe defies direct comprehension, accessible only through <strong>layers of abstraction</strong>.</p>
<p>This perspective echoes the thoughts of philosophers like <strong>Kant</strong>, who argued that our understanding of the world is shaped by our cognitive structures, preventing us from ever grasping the “thing-in-itself” (<em>Kant, 1781</em>). Even so, some thinkers propose we can still learn about reality by studying the consistent patterns we observe—though we must remain aware that such patterns might be forever filtered through human thought.</p>
</section>
<section id="instrumentalism-models-as-maps-not-territories" class="level2">
<h2 class="anchored" data-anchor-id="instrumentalism-models-as-maps-not-territories">Instrumentalism: Models as Maps, Not Territories</h2>
<p>Enter <strong>instrumentalism</strong>, a view supported by philosophers such as <strong>van Fraassen</strong> and <strong>Duhem</strong>. Instrumentalists see scientific theories as <strong>tools</strong>—useful models that help us predict and organize data without necessarily revealing the true nature of things (<em>Van Fraassen, 1980</em>; <em>Duhem, 1906</em>). In this light, entities like electrons or the Higgs boson are not inherently “real” in a tangible sense; rather, they function as conceptual placeholders for observed regularities.</p>
<p>When <strong>Newton</strong> described gravity as a force, he provided a powerful map for predicting planetary motion. However, <strong>Einstein’s</strong> revelation that gravity is the curvature of spacetime (<em>Einstein, 1915</em>) did more than refine our predictions; it <strong>recast</strong> our conceptual framework. For instrumentalists, such paradigm shifts show that scientific progress is less about unearthing an ultimate reality and more about developing models that <strong>work</strong>—and these models can be replaced if they cease to serve us.</p>
<p>Moreover, <strong>Nietzsche</strong> challenged the idea of universal, objective truth, claiming in works like <em>Twilight of the Idols</em> (1889) that our “truths” might be expressions of power, perspective, or utility. Though Nietzsche is not typically labeled as an instrumentalist, his critique of absolute truth resonates with the anti-realist stance that scientific knowledge is shaped by our own constructs and language.</p>
</section>
<section id="realism-peering-beneath-the-veil" class="level2">
<h2 class="anchored" data-anchor-id="realism-peering-beneath-the-veil">Realism: Peering Beneath the Veil</h2>
<p>By contrast, <strong>realists</strong> (e.g., <strong>Putnam</strong>, and to some degree <strong>Popper</strong> in his emphasis on objective knowledge) argue that scientific theories aim to describe a <strong>mind-independent</strong> reality (<em>Putnam, 1981</em>; <em>Popper, 1959</em>). The remarkable accuracy of scientific predictions—especially in fields like quantum mechanics or astronomy—suggests that we are uncovering genuine features of the universe. For instance, electrons consistently manifest across different experiments (chemistry, electronics, particle collisions), leading realists to say electrons are more than abstract labels; they are <strong>robust features</strong> of our world.</p>
<p>The so-called “no miracles” argument, discussed and refined by many philosophers (including Putnam), underscores this point: if our theories didn’t latch onto something real, it would be almost miraculous that they yield such precise predictions. Even if our ideas about electrons, quarks, or spacetime evolve, realists maintain that these changes move us progressively <strong>closer</strong> to the underlying truth.</p>
</section>
<section id="where-the-argument-falters" class="level2">
<h2 class="anchored" data-anchor-id="where-the-argument-falters">Where the Argument Falters</h2>
<p>Yet realism faces serious challenges, notably the <strong>pessimistic meta-induction</strong> (<em>Putnam, 1963</em>; <em>Kuhn, 1962</em>). Because many once-successful theories were later discarded (e.g., the phlogiston theory, luminiferous ether), we have little reason to assume today’s theories won’t meet a similar fate. Kuhn’s notion of <strong>paradigm shifts</strong> reinforces this doubt, suggesting scientific revolutions upend previous frameworks rather than simply refining them.</p>
<p>Realists often respond by pointing to <strong>structural realism</strong>, developed by <strong>Worrall</strong> (<em>Worrall, 1989</em>). While the surface concepts of theories can change drastically—gravity as force versus curvature, for instance—the underlying <strong>mathematical structures</strong> often remain. Maxwell’s equations survive within quantum electrodynamics (QED), for instance, indicating that some consistent, reality-based skeleton persists through revolutionary shifts.</p>
</section>
<section id="beyond-realism-and-instrumentalism-expanding-the-debate" class="level2">
<h2 class="anchored" data-anchor-id="beyond-realism-and-instrumentalism-expanding-the-debate">Beyond Realism and Instrumentalism: Expanding the Debate</h2>
<p>While realism and instrumentalism stand as major positions, there are other <strong>angles</strong> that deepen the conversation:</p>
<ol type="1">
<li><p><strong>Mathematical Underdetermination:</strong> Some question why mathematics, a human invention, so effectively describes the natural world. Is math a <strong>human abstraction</strong> that just happens to match reality, or does it reveal an independent, deeper structure? Physicist Eugene Wigner famously called this the “unreasonable effectiveness of mathematics,” stirring debates about whether our theories reflect universal truths or convenient coincidences.</p></li>
<li><p><strong>Cultural and Linguistic Frameworks:</strong> Philosopher of language <strong>Wittgenstein</strong> and anthropologists studying non-Western knowledge systems remind us that <strong>culture</strong> and <strong>language</strong> may heavily influence how we carve nature at its joints—or whether we see joints at all. Are particles and fields universal categories, or are they shaped by cultural biases?</p></li>
<li><p><strong>Observer Effect and Quantum Mechanics:</strong> Quantum theory introduces the puzzle of the <strong>observer effect</strong>, wherein the act of measurement can alter the system observed. Does this phenomenon support instrumentalism (since our knowledge is partly shaped by observation) or realism (since we still detect consistent, quantifiable outcomes)? This question remains at the heart of quantum interpretations.</p></li>
<li><p><strong>Consciousness and Reality:</strong> If consciousness itself plays a role in how reality appears, as some interpretations of quantum mechanics suggest, then perhaps <strong>all</strong> scientific models remain incomplete unless they account for experience. This line of thought raises questions about whether any model can be purely objective.</p></li>
</ol>
<p>By exploring these frontiers, we see that the debate extends beyond a two-sided dispute, hinting at <strong>new philosophical vistas</strong>.</p>
</section>
<section id="bridging-the-divide" class="level2">
<h2 class="anchored" data-anchor-id="bridging-the-divide">Bridging the Divide</h2>
<p>Even with these new angles, the tension between realism and instrumentalism remains. <strong>Convergent realism</strong> proposes that, despite scientific revolutions, there is a trend toward more accurate models over time. Meanwhile, <strong>monistic views</strong>—inspired by philosophers like <strong>Spinoza</strong>, who envisioned reality as a single substance (<em>Spinoza, 1677</em>)—suggest that all these “parts” we label (particles, fields, forces) might simply be different aspects of one underlying reality. We can either see them as legitimate windows into that unity (realism) or as conceptual slices that help us manage complexity (instrumentalism).</p>
<p>A key point both sides often share is <strong>epistemological humility</strong>. Our current abstractions, while powerful, may someday be replaced or radically reframed, reminding us that we never have a final, unassailable theory. This humility encourages continual questioning rather than dogmatic certainty.</p>
</section>
<section id="a-thought-provoking-dance" class="level2">
<h2 class="anchored" data-anchor-id="a-thought-provoking-dance">A Thought-Provoking Dance</h2>
<p>So, <strong>is everything an abstraction?</strong> From an instrumentalist standpoint, the answer leans toward “yes,” because theories are constructs we use. For realists, the question becomes “which parts of our abstractions track genuine, mind-independent structures?”</p>
<p>Ultimately, both views can coexist in a <strong>dialectical</strong> tension, driving us to refine our theories and question our assumptions. Where one viewpoint highlights the <strong>pragmatic</strong> aspects of science—models, predictions, experiments—the other insists on a <strong>mind-independent</strong> reality that we gradually uncover. Perhaps the richest perspective is to acknowledge the <strong>power</strong> of abstraction while remaining open to the possibility that what we call “real” may be more subtle, interconnected, or even stranger than we can currently grasp.</p>
</section>
<section id="conclusion-embracing-the-journey" class="level2">
<h2 class="anchored" data-anchor-id="conclusion-embracing-the-journey">Conclusion: Embracing the Journey</h2>
<p>As we stand on the brink of discovering ever-smaller particles and more complex interactions, one thing is clear: our ideas about reality are always in flux. <strong>Whether everything is an abstraction or not,</strong> our pursuit of knowledge continues to yield astonishing insights—fueling technology, shaping our self-understanding, and, yes, shifting our philosophical ground.</p>
<p>Accepting that our theories are provisional can free us from dogmatism, allowing us to appreciate science as a <strong>living conversation</strong>—an evolving tapestry of mathematics, experiments, and conceptual frameworks. In this light, the question “Is everything an abstraction?” does not demand a final answer but invites us to keep exploring, rethinking, and—perhaps most importantly—<strong>imagining</strong> what lies beyond our current boundaries of thought.</p>
<hr>
<section id="references" class="level3">
<h3 class="anchored" data-anchor-id="references">References</h3>
<ol type="1">
<li><strong>Immanuel Kant</strong>, <em>Critique of Pure Reason</em> (1781) – Distinguishes between phenomena and noumena, crucial for debates on abstraction.<br>
</li>
<li><strong>Bas van Fraassen</strong>, <em>The Scientific Image</em> (1980) – Foundational text for constructive empiricism, a form of instrumentalism.<br>
</li>
<li><strong>Pierre Duhem</strong>, <em>The Aim and Structure of Physical Theory</em> (1906) – Early proponent of the view that scientific theories are frameworks for organizing observations.<br>
</li>
<li><strong>Albert Einstein</strong>, “General Theory of Relativity” (1915) – Revolutionized the understanding of gravity as curvature of spacetime.<br>
</li>
<li><strong>Thomas Kuhn</strong>, <em>The Structure of Scientific Revolutions</em> (1962) – Introduces the concept of paradigm shifts, relevant to pessimistic meta-induction.<br>
</li>
<li><strong>Hilary Putnam</strong>, <em>Reason, Truth, and History</em> (1981); also <em>Mathematics, Matter and Method</em> (1963) – Discusses issues related to scientific realism, including the “no miracles” argument and skepticism about final truth.<br>
</li>
<li><strong>Karl Popper</strong>, <em>The Logic of Scientific Discovery</em> (1959) – Emphasizes falsifiability and objective knowledge, influencing debates on realism.<br>
</li>
<li><strong>Friedrich Nietzsche</strong>, <em>Twilight of the Idols</em> (1889) – Critiques objective truth, potentially aligning with anti-realist perspectives.<br>
</li>
<li><strong>Baruch Spinoza</strong>, <em>Ethics</em> (1677) – Presents a monistic view of reality as a single substance.<br>
</li>
<li><strong>John Worrall</strong>, “Scientific Realism and the Plasticity of the Conceptual Structure of Theories” (1989) – Proposes structural realism.</li>
</ol>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/bdsaglam\.github\.io\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>